<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="../../css/one.css" />
    <link rel="stylesheet" href="../../css/layui.css" />
  </head>
  <body class="light-mode" inmaintabuse="1">
    <div class="progress-bar-container">
        <span class="pjax-progress-bar"></span>
        <i class="pjax-progress-icon fas fa-circle-notch fa-spin"></i>
      </div>
      <main class="page-container">
      <div class="page-main-content is-home">
        <div class="page-main-content-top">
          <header class="header-wrapper">
            <div class="header-content">
              <div class="left">
                <a class="logo-title" href="/" data-pjax-state="">
                  程序员小明
                </a>
              </div>

              <div class="right">
                <div class="pc">
                  <ul class="menu-list">
                    <li class="menu-item">
                      <a class="active" href="/" data-pjax-state=""> 首页 </a>
                    </li>

                    <li class="menu-item">
                      <a class="" href="/archives" data-pjax-state="">
                        归档
                      </a>
                    </li>

                    <li class="menu-item">
                      <a class="" href="./label-con.html" data-pjax-state="">
                        标签
                      </a>
                    </li>

                    <li class="menu-item">
                      <a class="" href="/links" data-pjax-state=""> 友链 </a>
                    </li>

                    <li class="menu-item">
                      <a class="" href="/about" data-pjax-state=""> 关于 </a>
                    </li>

                    <li class="menu-item search search-popup-trigger">
                      <i class="fas fa-search"></i>
                    </li>
                  </ul>
                </div>
                <div class="mobile">
                  <div class="icon-item search search-popup-trigger">
                    <i class="fas fa-search"></i>
                  </div>

                  <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
      </div>

      <div class="page-main-content-middle">

        <div class="main-content">

            
                <div class="fade-in-down-animation">
<div class="post-page-container">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">linux centos如何安装docker</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="https://mynamecoder.com/images/avatar.png">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">小明</span>
                        
                            <span class="author-label">Lv5</span>
                        
                    </div>
                    <div class="meta-info">
                        
<div class="article-meta-info">
<span class="article-date article-meta-item">
    
        <i class="fa-regular fa-calendar-plus"></i>&nbsp;
    
    <span class="pc">2019-06-14 01:00:46</span>
    <span class="mobile">2019-06-14 01:00</span>
</span>

    <span class="article-update-date article-meta-item">
    <i class="fas fa-file-pen"></i>&nbsp;
    <span class="pc">2023-06-06 09:27:25</span>
</span>


    <span class="article-categories article-meta-item">
        <i class="fas fa-folder"></i>&nbsp;
        <ul>
            
                <li>
                    <a href="/categories/Linux/" data-pjax-state="">Linux</a>&nbsp;
                </li>
            
        </ul>
    </span>


    <span class="article-tags article-meta-item">
        <i class="fas fa-tags"></i>&nbsp;
        <ul>
            
                <li>
                    <a href="/tags/Linux/" data-pjax-state="">Linux</a>&nbsp;
                </li>
            
                <li>
                    | <a href="/tags/Docker/" data-pjax-state="">Docker</a>&nbsp;
                </li>
            
                <li>
                    | <a href="/tags/Centos/" data-pjax-state="">Centos</a>&nbsp;
                </li>
            
        </ul>
    </span>
    <span class="article-pv article-meta-item">
        <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv">1374</span>
    </span>
</div>

                    </div>
                </div>
            </div>
        
        <div class="article-content keep-markdown-body">
            
            <h1 id="CentOS-Docker-安装"><a href="#CentOS-Docker-安装" class="headerlink" title="CentOS Docker 安装" data-pjax-state=""></a>CentOS Docker 安装</h1><p>Docker支持以下的CentOS版本：</p>
<ul>
<li>CentOS 7 (64-bit)</li>
<li>CentOS 6.5 (64-bit) 或更高的版本<h2 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件" data-pjax-state=""></a>前提条件</h2>目前，CentOS 仅发行版本中的内核支持 Docker。<br>Docker 运行在 CentOS 7 上，要求系统为64位、系统内核版本为 3.10 以上。<br>Docker 运行在 CentOS-6.5 或更高的版本的 CentOS 上，要求系统为64位、系统内核版本为 2.6.32-431 或者更高版本。</li>
</ul>
<h2 id="使用-yum-安装（CentOS-7下）"><a href="#使用-yum-安装（CentOS-7下）" class="headerlink" title="使用 yum 安装（CentOS 7下）" data-pjax-state=""></a>使用 yum 安装（CentOS 7下）</h2><p>Docker 要求 CentOS 系统的内核版本高于 3.10 ，查看本页面的前提条件来验证你的CentOS 版本是否支持 Docker 。</p>
<p>通过 <code>uname -r </code>命令查看你当前的内核版本</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_9_centos ~]# uname -r</span><br><span class="line">3.10.0-514.26.2.el7.x86_64</span><br></pre></td></tr></tbody></table></figure>

<h2 id="安装-Docker"><a href="#安装-Docker" class="headerlink" title="安装 Docker" data-pjax-state=""></a>安装 Docker</h2><p>从 2017 年 3 月开始 docker 在原来的基础上分为两个分支版本: Docker CE 和 Docker EE。<br>Docker CE 即社区免费版，Docker EE 即企业版，强调安全，但需付费使用。<br>本文介绍 Docker CE 的安装使用。</p>
<p>移除旧的版本：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-selinux \</span><br><span class="line">                  docker-engine-selinux \</span><br><span class="line">                  docker-engine</span><br></pre></td></tr></tbody></table></figure>

<p>安装一些必要的系统工具：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></tbody></table></figure>

<p>添加软件源信息：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></tbody></table></figure>

<p>更新 yum 缓存：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum makecache fast</span><br></pre></td></tr></tbody></table></figure>
<p>安装 Docker-ce：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum -y install docker-ce</span><br></pre></td></tr></tbody></table></figure>
<p>启动 Docker 后台服务</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker</span><br></pre></td></tr></tbody></table></figure>
<p>测试运行 hello-world</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@coderxm ~]# docker run hello-world</span><br></pre></td></tr></tbody></table></figure>

<p>由于本地没有hello-world这个镜像，所以会下载一个hello-world的镜像，并在容器内运行。</p>
<h2 id="使用脚本安装-Docker"><a href="#使用脚本安装-Docker" class="headerlink" title="使用脚本安装 Docker" data-pjax-state=""></a>使用脚本安装 Docker</h2><ol>
<li>使用 sudo 或 root 权限登录 Centos。</li>
<li>确保 yum 包更新到最新。<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum update</span><br></pre></td></tr></tbody></table></figure></li>
<li>执行 Docker 安装脚本。</li>
</ol>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com -o get-docker.sh</span><br><span class="line">sudo sh get-docker.sh</span><br></pre></td></tr></tbody></table></figure>
<p>执行这个脚本会添加 docker.repo 源并安装 Docker。</p>
<ol start="4">
<li>启动 Docker 进程。<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker</span><br></pre></td></tr></tbody></table></figure></li>
<li>验证 docker 是否安装成功并在容器中执行一个测试的镜像。<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run hello-world</span><br></pre></td></tr></tbody></table></figure>
可以看出来控制台有输出“Hello from Docker!“等字样，到此，Docker 在 CentOS 系统的安装完成。</li>
</ol>
<h2 id="镜像加速"><a href="#镜像加速" class="headerlink" title="镜像加速" data-pjax-state=""></a>镜像加速</h2><p>鉴于国内网络问题，后续拉取 Docker 镜像十分缓慢，我们可以需要配置加速器来解决，我使用的是网易的镜像地址：<a class="link" target="_blank" rel="noopener" href="http://hub-mirror.c.163.com./" data-pjax-state="">http://hub-mirror.c.163.com。<i class="fas fa-external-link-alt"></i></a></p>
<p>新版的 Docker 使用 /etc/docker/daemon.json（Linux） 或者 %programdata%\docker\config\daemon.json（Windows） 来配置 Daemon。</p>
<p>请在该配置文件中加入（没有该文件的话，请先建一个）：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  "registry-mirrors": ["http://hub-mirror.c.163.com"]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>检查加速器是否生效<br>执行 </p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker info</span><br></pre></td></tr></tbody></table></figure>
<p>如果从结果中看到了如下内容，说明配置成功。<br>Registry Mirrors:<br> <a class="link" target="_blank" rel="noopener" href="https://hub-mirror.c.163.com/" data-pjax-state="">https://hub-mirror.c.163.com/<i class="fas fa-external-link-alt"></i></a></p>
<h2 id="安装Docker-Compose"><a href="#安装Docker-Compose" class="headerlink" title="安装Docker Compose" data-pjax-state=""></a>安装Docker Compose</h2><h3 id="Compose-简介"><a href="#Compose-简介" class="headerlink" title="Compose 简介" data-pjax-state=""></a>Compose 简介</h3><p>Compose 是用于定义和运行多容器 Docker 应用程序的工具。通过 Compose，您可以使用 YML 文件来配置应用程序需要的所有服务。然后，使用一个命令，就可以从 YML 文件配置中创建并启动所有服务。</p>
<p>Compose 使用的三个步骤：</p>
<ul>
<li>使用 Dockerfile 定义应用程序的环境。</li>
<li>使用 docker-compose.yml 定义构成应用程序的服务，这样它们可以在隔离环境中一起运行。</li>
<li>最后，执行 docker-compose up 命令来启动并运行整个应用程序。<h3 id="Compose-安装"><a href="#Compose-安装" class="headerlink" title="Compose 安装" data-pjax-state=""></a>Compose 安装</h3>通过<code>yum</code>安装组件变得都很方便，比如compose<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker-compose</span><br></pre></td></tr></tbody></table></figure>

</li>
</ul>
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/Linux/" data-pjax-state="">#Linux</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/tags/Docker/" data-pjax-state="">#Docker</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/tags/Centos/" data-pjax-state="">#Centos</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev" rel="prev" href="/p/17df.html" data-pjax-state="">
                        <span class="left arrow-icon flex-center">
                          <i class="fas fa-chevron-left"></i>
                        </span>
                            <span class="title flex-center">
                            <span class="post-nav-title-item">阿里云企业云邮箱收发设置</span>
                            <span class="post-nav-item">上一篇</span>
                        </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next" rel="next" href="/p/db00.html" data-pjax-state="">
                        <span class="title flex-center">
                            <span class="post-nav-title-item">Jenkins自动化部署入门（一）</span>
                            <span class="post-nav-item">下一篇</span>
                        </span>
                            <span class="right arrow-icon flex-center">
                          <i class="fas fa-chevron-right"></i>
                        </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                
<div class="comments-container">
<div id="comments-anchor"></div>
<div class="comment-area-title">
    <i class="fas fa-comments"></i>&nbsp;评论
</div>

    
        

<div class="valine-container">
    <script src="https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js" data-pjax=""></script>
    <div id="vcomments"></div>
    <script data-pjax="">
      function loadValine() {

        const config = {
          el: '#vcomments',
          appId: 'RYD6fM3F1jQ4aTSXOzbclYi6-9Nh9j0Va',
          appKey: 'mjF7jJLYlbIcPU2mUOoh0I88',
          meta: ['nick', 'mail', 'link'],
          avatar: 'wavatar',
          enableQQ: true,
          placeholder: '说点什么',
          lang: 'zh-CN'.toLowerCase()
        }

        if ('') {
          config.serverURLs = ''
        }

        new Valine(config)

        function getAuthor(language) {
          switch (language) {
            case 'en':
              return 'Author'
            case 'zh-CN':
              return '博主'
            default:
              return 'Master'
          }
        }

        // Add "Author" identify
        const getValineDomTimer = setInterval(() => {
          const vcards = document.querySelectorAll('#vcomments .vcards .vcard')
          if (vcards.length > 0) {
            let author = '小明'

            if (author) {
              for (let vcard of vcards) {
                const vnick_dom = vcard.querySelector('.vhead .vnick')
                const vnick = vnick_dom.innerHTML
                if (vnick === author) {
                  vnick_dom.innerHTML = `${vnick} <span class="author">${getAuthor(KEEP.hexo_config.language)}</span>`
                }
              }
            }
            clearInterval(getValineDomTimer)
          } else {
            clearInterval(getValineDomTimer)
          }
        }, 2000)
      }

      if ('true' === 'true') {
        const loadValineTimeout = setTimeout(() => {
          loadValine()
          clearTimeout(loadValineTimeout)
        }, 1000)
      } else {
        window.addEventListener('DOMContentLoaded', loadValine)
      }
    </script>
</div>



    

</div>

            </div>
        
    </div>

    
        <div class="toc-content-container">
            <div class="post-toc-wrap">
<div class="post-toc">
    <ol class="nav"><li class="nav-item nav-level-1 active"><a class="nav-link active active-current" href="#CentOS-Docker-%E5%AE%89%E8%A3%85" data-pjax-state="">
        <span class="nav-text">CentOS Docker 安装</span>
    </a><ol class="nav-child">
        <li class="nav-item nav-level-2">
            <a class="nav-link" href="#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6" data-pjax-state="">
                <span class="nav-text">前提条件</span></a></li><li class="nav-item nav-level-2">
                    <a class="nav-link" href="#%E4%BD%BF%E7%94%A8-yum-%E5%AE%89%E8%A3%85%EF%BC%88CentOS-7%E4%B8%8B%EF%BC%89" data-pjax-state=""><span class="nav-text">使用 yum 安装（CentOS 7下）</span>
                    </a>
                </li>
                <li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-Docker" data-pjax-state=""><span class="nav-text">安装 Docker</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85-Docker" data-pjax-state=""><span class="nav-text">使用脚本安装 Docker</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F" data-pjax-state=""><span class="nav-text">镜像加速</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85Docker-Compose" data-pjax-state=""><span class="nav-text">安装Docker Compose</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Compose-%E7%AE%80%E4%BB%8B" data-pjax-state=""><span class="nav-text">Compose 简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Compose-%E5%AE%89%E8%A3%85" data-pjax-state=""><span class="nav-text">Compose 安装</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4-Docker-CE" data-pjax-state=""><span class="nav-text">删除 Docker CE</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AC%A2%E8%BF%8E%E5%85%B3%E6%B3%A8%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%EF%BC%8C%E8%8E%B7%E5%8F%96%E6%9B%B4%E5%A4%9A%E8%B5%84%E6%BA%90" data-pjax-state=""><span class="nav-text">欢迎关注微信公众号，获取更多资源</span></a></li></ol></li></ol></li></ol>
</div>
</div>

        </div>
    
</div>
</div>


            
        </div>

    </div>

    <div class="page-main-content-bottom">
        <footer class="footer">
          <div class="info-container">
            <div class="copyright-info info-item">
              ©
              <span>2018</span> - 2023 &nbsp;<i
                class="fas fa-heart icon-animate"
              ></i>
              &nbsp;<a href="/" data-pjax-state="">小明</a>
            </div>

            <script
              async=""
              data-pjax=""
              src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"
            ></script>
            <div class="website-count info-item">
              访问人数&nbsp;<span id="busuanzi_value_site_uv">23815</span> 
              总访问量&nbsp;<span id="busuanzi_value_site_pv">28388</span>
            </div>

            <div class="theme-info info-item">
              由
              <a target="_blank" href="https://hexo.io" data-pjax-state=""
                >Hexo</a
              >
              驱动&nbsp;|&nbsp;主题&nbsp;<a
                class="theme-version"
                target="_blank"
                href="https://github.com/XPoet/hexo-theme-keep"
                data-pjax-state=""
                >Keep v3.6.1</a
              >
            </div>

            <div class="icp-info info-item">
              <a
                target="_blank"
                rel="nofollow"
                href="https://beian.miit.gov.cn"
                data-pjax-state=""
              >
                京ICP备19029015号-1
              </a>
            </div>
          </div>
        </footer>
      </div>
    </main>
   
  </body>
</html>
